---
import "../styles/global.css";
import events from "../data/events.json";

// DÃ­as de noviembre (1â€“30)
const days = Array.from({ length: 30 }, (_, i) => i + 1);

// Parseo seguro en UTC
const toUTC = (dateStr) => new Date(dateStr + "T00:00:00Z");

// DuraciÃ³n total en dÃ­as (incluye el inicio y el fin)
const getSpan = (start, end) => {
  const d1 = toUTC(start);
  const d2 = toUTC(end);
  const diff = (d2 - d1) / 86400000; // ms â†’ dÃ­as
  return diff + 1;
};
---
<!DOCTYPE html>
<html lang="es" class="h-full bg-neutral-100 dark:bg-neutral-900">
  <head>
    <meta charset="UTF-8" />
    <title>Eventos Noviembre 2025</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body class="min-h-screen text-neutral-900 dark:text-neutral-100 antialiased">
    <main class="container mx-auto px-6 py-12">
      <h1 class="text-3xl font-semibold mb-6">ðŸ“… Eventos Noviembre 2025</h1>

      <!-- Scroll horizontal -->
      <div class="w-full overflow-x-auto pb-6">

        <!-- Timeline en grid horizontal -->
        <div
          class="grid gap-2"
          style={`grid-template-columns: repeat(${days.length}, 150px);`}
        >

          <!-- Header de dÃ­as -->
          {days.map((d) => (
            <div class="text-center font-bold py-1 border-b border-neutral-400">
              {d}
            </div>
          ))}

          <!-- Eventos -->
          {events.map((ev) => {
            const start = toUTC(ev.start);
            const span = getSpan(ev.start, ev.end);
            const startDay = start.getUTCDate();

            return (
              <a
                href={ev.url}
                target="_blank"
                class={`p-3 rounded text-sm shadow-md hover:scale-[1.03] transition cursor-pointer ${ev.color ?? ""}`}
                style={`grid-column: ${startDay} / span ${span};`}
              >
                {ev.title}
              </a>
            );
          })}
        </div>
      </div>
    </main>
  </body>
</html>
